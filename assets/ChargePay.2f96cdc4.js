import{d as Y,m as h,f as u,L as de,s as me,O as he,P as fe,x as be,h as f,u as ye,W as R,j as ze,aG as _e,aH as pe,g as Pe,_ as Se,o as T,c as ge,w as P,r as Ce,a as c,D as r,Q as qe,ar as xe,as as Q,av as E,aw as L,F as b,E as S,G as g}from"./index.b5e91dde.js";import{Q as G}from"./QInput.d458a39a.js";import{u as Te,a as we}from"./use-key-composition.5c817718.js";import{a as F,Q as Re}from"./QResizeObserver.8e63c29b.js";import{T as U,C as I}from"./ClosePopup.27e8abf7.js";import{o as w,Q as Qe}from"./format.02518bd1.js";import{s as $,d as M}from"./scroll.a9234d16.js";import{a as Me,Q as ke}from"./QCard.92800d1f.js";import{Q as Ae}from"./QPage.4741071f.js";import{T as Ve}from"./TitlePage.e5a5e281.js";import"./uid.42677368.js";import"./use-timeout.db7ec3a8.js";const K=["vertical","horizontal"],k={vertical:{offset:"offsetY",scroll:"scrollTop",dir:"down",dist:"y"},horizontal:{offset:"offsetX",scroll:"scrollLeft",dir:"right",dist:"x"}},W={prevent:!0,mouse:!0,mouseAllDir:!0},X=l=>l>=250?50:Math.ceil(l/5);var He=Y({name:"QScrollArea",props:{...Te,thumbStyle:Object,verticalThumbStyle:Object,horizontalThumbStyle:Object,barStyle:[Array,String,Object],verticalBarStyle:[Array,String,Object],horizontalBarStyle:[Array,String,Object],contentStyle:[Array,String,Object],contentActiveStyle:[Array,String,Object],delay:{type:[String,Number],default:1e3},visible:{type:Boolean,default:null},tabindex:[String,Number],onScroll:Function},setup(l,{slots:o,emit:v}){const d=h(!1),n=h(!1),m=h(!1),s={vertical:h(0),horizontal:h(0)},e={vertical:{ref:h(null),position:h(0),size:h(0)},horizontal:{ref:h(null),position:h(0),size:h(0)}},{proxy:y}=ze(),z=we(l,y.$q);let A,V;const _=h(null),J=u(()=>"q-scrollarea"+(z.value===!0?" q-scrollarea--dark":""));e.vertical.percentage=u(()=>{const t=e.vertical.size.value-s.vertical.value;if(t<=0)return 0;const a=w(e.vertical.position.value/t,0,1);return Math.round(a*1e4)/1e4}),e.vertical.thumbHidden=u(()=>(l.visible===null?m.value:l.visible)!==!0&&d.value===!1&&n.value===!1||e.vertical.size.value<=s.vertical.value+1),e.vertical.thumbStart=u(()=>e.vertical.percentage.value*(s.vertical.value-e.vertical.thumbSize.value)),e.vertical.thumbSize=u(()=>Math.round(w(s.vertical.value*s.vertical.value/e.vertical.size.value,X(s.vertical.value),s.vertical.value))),e.vertical.style=u(()=>({...l.thumbStyle,...l.verticalThumbStyle,top:`${e.vertical.thumbStart.value}px`,height:`${e.vertical.thumbSize.value}px`})),e.vertical.thumbClass=u(()=>"q-scrollarea__thumb q-scrollarea__thumb--v absolute-right"+(e.vertical.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),e.vertical.barClass=u(()=>"q-scrollarea__bar q-scrollarea__bar--v absolute-right"+(e.vertical.thumbHidden.value===!0?" q-scrollarea__bar--invisible":"")),e.horizontal.percentage=u(()=>{const t=e.horizontal.size.value-s.horizontal.value;if(t<=0)return 0;const a=w(Math.abs(e.horizontal.position.value)/t,0,1);return Math.round(a*1e4)/1e4}),e.horizontal.thumbHidden=u(()=>(l.visible===null?m.value:l.visible)!==!0&&d.value===!1&&n.value===!1||e.horizontal.size.value<=s.horizontal.value+1),e.horizontal.thumbStart=u(()=>e.horizontal.percentage.value*(s.horizontal.value-e.horizontal.thumbSize.value)),e.horizontal.thumbSize=u(()=>Math.round(w(s.horizontal.value*s.horizontal.value/e.horizontal.size.value,X(s.horizontal.value),s.horizontal.value))),e.horizontal.style=u(()=>({...l.thumbStyle,...l.horizontalThumbStyle,[y.$q.lang.rtl===!0?"right":"left"]:`${e.horizontal.thumbStart.value}px`,width:`${e.horizontal.thumbSize.value}px`})),e.horizontal.thumbClass=u(()=>"q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom"+(e.horizontal.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),e.horizontal.barClass=u(()=>"q-scrollarea__bar q-scrollarea__bar--h absolute-bottom"+(e.horizontal.thumbHidden.value===!0?" q-scrollarea__bar--invisible":""));const Z=u(()=>e.vertical.thumbHidden.value===!0&&e.horizontal.thumbHidden.value===!0?l.contentStyle:l.contentActiveStyle),ee=[[U,t=>{B(t,"vertical")},void 0,{vertical:!0,...W}]],te=[[U,t=>{B(t,"horizontal")},void 0,{horizontal:!0,...W}]];function H(){const t={};return K.forEach(a=>{const i=e[a];t[a+"Position"]=i.position.value,t[a+"Percentage"]=i.percentage.value,t[a+"Size"]=i.size.value,t[a+"ContainerSize"]=s[a].value}),t}const N=de(()=>{const t=H();t.ref=y,v("scroll",t)},0);function O(t,a,i){if(K.includes(t)===!1){console.error("[QScrollArea]: wrong first param of setScrollPosition (vertical/horizontal)");return}(t==="vertical"?$:M)(_.value,a,i)}function le({height:t,width:a}){let i=!1;s.vertical.value!==t&&(s.vertical.value=t,i=!0),s.horizontal.value!==a&&(s.horizontal.value=a,i=!0),i===!0&&C()}function ae({position:t}){let a=!1;e.vertical.position.value!==t.top&&(e.vertical.position.value=t.top,a=!0),e.horizontal.position.value!==t.left&&(e.horizontal.position.value=t.left,a=!0),a===!0&&C()}function oe({height:t,width:a}){e.horizontal.size.value!==a&&(e.horizontal.size.value=a,C()),e.vertical.size.value!==t&&(e.vertical.size.value=t,C())}function B(t,a){const i=e[a];if(t.isFirst===!0){if(i.thumbHidden.value===!0)return;V=i.position.value,n.value=!0}else if(n.value!==!0)return;t.isFinal===!0&&(n.value=!1);const p=k[a],x=s[a].value,ue=(i.size.value-x)/(x-i.thumbSize.value),ce=t.distance[p.dist],ve=V+(t.direction===p.dir?1:-1)*ce*ue;D(ve,a)}function j(t,a){const i=e[a];if(i.thumbHidden.value!==!0){const p=t[k[a].offset];if(p<i.thumbStart.value||p>i.thumbStart.value+i.thumbSize.value){const x=p-i.thumbSize.value/2;D(x/s[a].value*i.size.value,a)}i.ref.value!==null&&i.ref.value.dispatchEvent(new MouseEvent(t.type,t))}}function re(t){j(t,"vertical")}function ie(t){j(t,"horizontal")}function C(){d.value===!0?clearTimeout(A):d.value=!0,A=setTimeout(()=>{d.value=!1},l.delay),l.onScroll!==void 0&&N()}function D(t,a){_.value[k[a].scroll]=t}function se(){m.value=!0}function ne(){m.value=!1}let q=null;return me(()=>y.$q.lang.rtl,t=>{_.value!==null&&M(_.value,Math.abs(e.horizontal.position.value)*(t===!0?-1:1))}),he(()=>{q={top:e.vertical.position.value,left:e.horizontal.position.value}}),fe(()=>{if(q===null)return;const t=_.value;t!==null&&(M(t,q.left),$(t,q.top))}),be(N.cancel),Object.assign(y,{getScrollTarget:()=>_.value,getScroll:H,getScrollPosition:()=>({top:e.vertical.position.value,left:e.horizontal.position.value}),getScrollPercentage:()=>({top:e.vertical.percentage.value,left:e.horizontal.percentage.value}),setScrollPosition:O,setScrollPercentage(t,a,i){O(t,a*(e[t].size.value-s[t].value)*(t==="horizontal"&&y.$q.lang.rtl===!0?-1:1),i)}}),()=>f("div",{class:J.value,onMouseenter:se,onMouseleave:ne},[f("div",{ref:_,class:"q-scrollarea__container scroll relative-position fit hide-scrollbar",tabindex:l.tabindex!==void 0?l.tabindex:void 0},[f("div",{class:"q-scrollarea__content absolute",style:Z.value},ye(o.default,[f(F,{debounce:0,onResize:oe})])),f(Re,{axis:"both",onScroll:ae})]),f(F,{debounce:0,onResize:le}),f("div",{class:e.vertical.barClass.value,style:[l.barStyle,l.verticalBarStyle],"aria-hidden":"true",onMousedown:re}),f("div",{class:e.horizontal.barClass.value,style:[l.barStyle,l.horizontalBarStyle],"aria-hidden":"true",onMousedown:ie}),R(f("div",{ref:e.vertical.ref,class:e.vertical.thumbClass.value,style:e.vertical.style.value,"aria-hidden":"true"}),ee),R(f("div",{ref:e.horizontal.ref,class:e.horizontal.thumbClass.value,style:e.horizontal.style.value,"aria-hidden":"true"}),te)])}}),Ne=Y({name:"QCardActions",props:{..._e,vertical:Boolean},setup(l,{slots:o}){const v=pe(l),d=u(()=>`q-card__actions ${v.value} q-card__actions--${l.vertical===!0?"vert column":"horiz row"}`);return()=>f("div",{class:d.value},Pe(o.default))}});const Oe={components:{TitlePage:Ve},data(){return{search:"",confirm:!1,selectRemoveProduct:null,productList:[{productCode:"1",count:1,productName:"\u0E04\u0E23\u0E35\u0E21\u0E19\u0E27\u0E14",costPay:500.21,unitPay:200,promotionPay:11540,resultPay:0,discount:0,tempResultPay:0},{productCode:"2",count:1,productName:"\u0E04\u0E23\u0E35\u0E21\u0E19\u0E27\u0E14",costPay:50,unitPay:null,promotionPay:0,resultPay:null,discount:0,tempResultPay:0},{productCode:"3",count:10,productName:"\u0E04\u0E23\u0E35\u0E21\u0E19\u0E27\u0E14",costPay:50,unitPay:null,promotionPay:0,resultPay:null,discount:0,tempResultPay:0},{productCode:"4",count:2,productName:"\u0E04\u0E23\u0E35\u0E21\u0E19\u0E27\u0E14",costPay:50,unitPay:null,promotionPay:0,resultPay:null,discount:0,tempResultPay:0}]}},methods:{removeProduct(l){const o=this.productList.findIndex(v=>v.productCode===l.productCode);this.productList.splice(o,1)},GetTotalPay(){let l=0;return this.productList.forEach(o=>{l+=o.resultPay}),l},GetProductsNumber(){let l=0;return this.productList.forEach(o=>{l+=o.count}),l},GetTotalPayout(){let l=0;return this.productList.forEach(o=>{l+=o.count}),l},onEnter(l){console.log("onEnter: ",l)},GetPay(l){return l.promotionPay==0?l.costPay:l.promotionPay},getResultPay(l,o){var v=this.GetPay(l),d=l.count*v;return l.resultPay=d-o,l.tempResultPay=d,l},myRule(l,o){return new Promise((v,d)=>{var n=o.tempResultPay-l;l<0?(v("* \u0E2A\u0E48\u0E27\u0E19\u0E25\u0E14\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07"),setTimeout(()=>{o.discount=0},1e3)):n<o.costPay*o.count?(v("* \u0E44\u0E21\u0E48\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E25\u0E14\u0E44\u0E14\u0E49 \u0E40\u0E19\u0E37\u0E48\u0E2D\u0E07\u0E08\u0E32\u0E01\u0E02\u0E32\u0E14\u0E17\u0E38\u0E19"),o.discount=0):v()})}}},Be={class:"q-px-md"},je=r("div",{class:"q-md-md"},"\u0E0A\u0E37\u0E48\u0E2D\u0E04\u0E19\u0E02\u0E32\u0E22: \u0E19\u0E32\u0E22\u0E27\u0E31\u0E0A\u0E23\u0E1E\u0E25 \u0E19\u0E38\u0E49\u0E22\u0E2A\u0E34\u0E19",-1),De={class:"row q-gutter-md"},Ee={class:"col"},Le={class:"col sty-list-product q-my-md"},Ge=r("div",null,"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32",-1),Fe=r("li",{style:{"list-style-type":"none"}},[r("div",{class:"row"},[r("div",{class:"col text-center"},"\u0E0A\u0E37\u0E48\u0E2D\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32"),r("div",{class:"col text-center"},"\u0E08\u0E33\u0E19\u0E27\u0E19"),r("div",{class:"col text-center"},"\u0E23\u0E32\u0E04\u0E32/\u0E2B\u0E19\u0E48\u0E27\u0E22"),r("div",{class:"col text-center"},"\u0E2A\u0E48\u0E27\u0E19\u0E25\u0E14\u0E1E\u0E34\u0E40\u0E28\u0E29"),r("div",{class:"col text-center"},"\u0E23\u0E32\u0E04\u0E32\u0E23\u0E27\u0E21")])],-1),Ue={class:"row items-center"},Ie={class:"col"},$e={class:"col text-center"},Ke={class:"col text-center"},We={class:"col"},Xe={class:"q-pr-xl"},Ye={class:"col text-center"},Je={class:"row"},Ze={class:"col"},et={class:"col"},tt={class:"q-ml-sm text-h6"},lt=r("br",null,null,-1),at=r("br",null,null,-1);function ot(l,o,v,d,n,m){const s=Ce("TitlePage");return T(),ge(Ae,{class:"q-pa-md"},{default:P(()=>[c(s,{TitleName:"\u0E08\u0E48\u0E32\u0E22\u0E40\u0E07\u0E34\u0E19"}),r("div",Be,[je,r("div",De,[r("div",Ee,[c(G,{modelValue:n.search,"onUpdate:modelValue":o[0]||(o[0]=e=>n.search=e),filled:"",placeholder:"\u0E04\u0E49\u0E19\u0E2B\u0E32\u0E23\u0E2B\u0E31\u0E2A\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32",dense:!0,counter:"",clearable:"",onKeyup:o[1]||(o[1]=xe(e=>m.onEnter(n.search),["enter"]))},{append:P(()=>[c(qe,{name:"search"})]),_:1},8,["modelValue"])]),r("div",Le,[c(He,{class:"q-pa-md",style:{height:"200px"}},{default:P(()=>[r("ul",null,[(T(),Q(L,null,E(100,e=>r("li",{key:e},"1")),64))])]),_:1})])]),Ge,r("div",null,[r("ul",null,[Fe,(T(!0),Q(L,null,E(n.productList,(e,y)=>(T(),Q("li",{style:{"list-style-type":"none"},class:"q-my-sm",key:y},[r("div",Ue,[r("div",Ie,[c(g,{round:"",glossy:"",icon:"fa-solid fa-trash-can",class:"q-mx-sm",color:"negative",size:"md",onClick:z=>{n.selectRemoveProduct=e,n.confirm=!0}},null,8,["onClick"]),S(" "+b(e.productName)+" => "+b(e.costPay*e.count),1)]),r("div",$e,[c(g,{round:"",glossy:"",icon:"fa-solid fa-minus",class:"q-mx-sm",color:"negative",size:"sm",onClick:z=>--e.count,disable:e.count<=1},null,8,["onClick","disable"]),S(" "+b(e.count)+" ",1),c(g,{round:"",glossy:"",icon:"fa-solid fa-plus",class:"q-mx-sm",color:"positive",size:"sm",onClick:z=>++e.count},null,8,["onClick"])]),r("div",Ke,b(m.GetPay(e).toFixed(2).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")),1),r("div",We,[r("div",Xe,[c(G,{modelValue:e.discount,"onUpdate:modelValue":z=>e.discount=z,modelModifiers:{number:!0},type:"number",label:"\u0E2A\u0E48\u0E27\u0E19\u0E25\u0E14\u0E1E\u0E34\u0E40\u0E28\u0E29",rules:[z=>m.myRule(z,e)]},null,8,["modelValue","onUpdate:modelValue","rules"])])]),r("div",Ye,b(m.getResultPay(e,e.discount).resultPay.toFixed(2).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")),1)])]))),128))])]),r("div",Je,[r("div",Ze,"\u0E22\u0E2D\u0E14\u0E2A\u0E38\u0E17\u0E18\u0E34 "+b(m.GetProductsNumber()),1),r("div",et,b(m.GetTotalPay().toFixed(2).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"))+" \u0E1A\u0E32\u0E17 ",1)])]),c(Qe,{modelValue:n.confirm,"onUpdate:modelValue":o[4]||(o[4]=e=>n.confirm=e),persistent:""},{default:P(()=>[c(Me,null,{default:P(()=>[c(ke,{class:"row items-center",style:{margin:"0 50px"}},{default:P(()=>[r("span",tt,[S(" \u0E15\u0E49\u0E2D\u0E07\u0E01\u0E32\u0E23\u0E25\u0E1A\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32: "+b(n.selectRemoveProduct.productName)+" ",1),lt,S(" \u0E08\u0E33\u0E19\u0E27\u0E19: "+b(n.selectRemoveProduct.count)+" \u0E0A\u0E34\u0E49\u0E19 ",1),at,S(" \u0E23\u0E32\u0E04\u0E32: "+b(n.selectRemoveProduct.resultPay)+" \u0E1A\u0E32\u0E17 ",1)])]),_:1}),c(Ne,{align:"right"},{default:P(()=>[R(c(g,{flat:"",label:"\u0E1B\u0E34\u0E14",color:"negative",onClick:o[2]||(o[2]=e=>n.selectRemoveProduct=null)},null,512),[[I]]),R(c(g,{flat:"",label:"\u0E15\u0E01\u0E25\u0E07",color:"primary",onClick:o[3]||(o[3]=e=>m.removeProduct(n.selectRemoveProduct))},null,512),[[I]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var yt=Se(Oe,[["render",ot]]);export{yt as default};
